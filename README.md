# Juniper/Author
A WordPress plugin to manage plugin and theme ownership on various platforms, starting with Github.

## How It Works

Juniper/Author is meant to be installed by plugin and theme authors who currently distribute or want to distribute their plugins and themes via Github. 

It synchonizes your Github repositories to your public WordPress installation, which can then be used to cryptographically sign your ZIPs for distribution (coming soon).  In addition, Juniper/Author provides a WordPress API endpoint for Juniper/Server, a distributed mirror system that does not rely on WordPress.org for finding and installing WordPress plugins and themes.

## Installation

Juniper/Author can be installed as normal by downloading the plugin from Github and installing it in the WordPress admin.  At some point in the near future, the Juniper/Berry installer will be complete which will allow only cryptographically signed ZIP files to be installed.  Why is that important?  When a ZIP file is signed and verified, it means it was generated by the author and not tampered with at any point.  This prevents supply-chain attacks where a rogue organization could potentially take over a plugin or theme supply chain, effectively taking ownership of it.

## Post-Install Steps

Once the plugin is installed, you'll need to perform the following steps:

1. In the admin panel in the Authorship/Options section, generate a private/public key pair to be used for signing.  Your private key needs to be encrypted with a password, so make sure to choose a strong one here during the key generation phase.  This password is not stored anywhere on your install, so if you lose it you will no longer be able to sign your ZIP files, and will be forced to regenerate a new key (effectively making all other previously released ZIP files no longer valid).
2. Juniper/Author communicates extensively with Github via their public-facing API, which is heavily rate-limited.  To get around that, you need to create an access token to use in by your WordPress installation.
   - First, go to your Github page, and click your avatar in the corner.  Choose "Settings", and navigate to the bottom to "Developer Settings"
   - Select "Personal Acccess Tokens", and then "Tokens (Classic)"
   - Click the dropdown to "Generate new token" and select "New Fine-grained personal access token"
   - Give your token a name just so you remember what it is, i.e. "Juniper Access Token"
   - Set the expiration to "No expiration"
   - Juniper/Author currently doesn't write to Github, so you can use the "Public Repositories (read-only)" setting for access
   - You don't need to add any other additional permissions, so click "Generate" when done
   - When you see your token, copy it and paste it into the Juniper/Author admin for the "Github Token" setting, and click Save
3. Click the "Repositories" menu option under "Juniper" in the WordPress admin
4. To import your repositories, click "Refresh" at the bottom.  This process may take a little while, so don't worry too much if it takes up to 30 seconds or so
5. Once done, you should see a list of all your repositories where Juniper/Author detected a valid WordPress plugin.
6. To submit these plugins to the currently active Juniper/Server install at [notwp.org](https://notwp.org), click Submit To Mirror.  This will queue your site for additional the public mirror.

## Code Signing

To facilitate code-signing, two things are required. The first is to use your private key and sign each of your release ZIP files. This can be accomplished via the WordPress admin via the Juniper side menu, under Repositories.  From here you can enter your private key password and click the "Sign" button, which will iterate through all your ZIP files and sign them locally.  At this point, all signed ZIP files will be served from your Juniper/Author install.  Regular ZIP files can still be downloaded and processed as per normal, which means regular updates like Github Updater and Repo Man will still continue to work fine.  The signed ZIP files will be used at a later stage when Juniper/Berry is completed.

Second, you need to add a particular header onto your main plugin file, "Authority".  An example is below:

```
Stable: 1.0.2
Authority: https://plugins.duanestorey.com
```

The website listed for the Authority needs to be the website where Juniper/Author is installed, and it must be for a repository under control in the "Repositories" menu in Juniper. 

Once the plugin is installed on a WordPress website, Juniper/Berry (when it's complete) will use the Authority information in the plugin header to determine where to retrieve the public key for future ZIP files for each release.  Once it retrieves it, it will be used to verify that the ZIP file came from that Juniper/Author installation via that website, and also that the original hash/integrity of the ZIP file is maintained.  If someone where to tamper with the ZIP file, or sign it with a different private key, both situations would fail the integrity check, and the new plugin would not be installed.  

## Early Alpha

This is a very early version, with several missing features. That said, it's at the point where it needs a few alpha/beta testers.  So if you have a public-facing (not local) website that you want to use as your main server for your Github plugins, then please install Juniper/Author and provide some feedback via Github Issues.  Currently Juniper/Author doesn't facilitate upgrades or the consumption of signed ZIP files, but this will be coming soon.
